# Tree Metadata Configuration
# Defines context requirements and blackboard contracts for behavior trees

trees:
  - id: "demo_tree.xml"
    description: "Iterates through waypoints, navigates, and logs temperature."
    context_requirements: [ROBOT_POSE, SLAM_MAP_IMAGE]
    blackboard_contract:
      waypoints:
        type: "string"
        required: true
        default: ""
        schema:
          type: "string"
          description: "Semicolon-separated waypoints, each formatted as 'x,y,yaw' (meters, meters, radians)."
          pattern: '^-?\\d+(\\.\\d+)?,-?\\d+(\\.\\d+)?,-?\\d+(\\.\\d+)?(\\s*;\\s*-?\\d+(\\.\\d+)?,-?\\d+(\\.\\d+)?,-?\\d+(\\.\\d+)?)*$'
          examples:
            - "1.0,2.0,0.0; 3.5,4.2,1.57"
      logfile_path:
        type: "string"
        required: false
        default: "/tmp/temperature_log.txt"

  - id: "navigate_and_photograph.xml"
    description: "Navigate to waypoints and take photos at regular intervals"
    context_requirements:
      - ROBOT_POSE
      - RGB_IMAGE
      - GPS_FIX
    blackboard_contract:
      waypoints:
        type: "string"
        required: true
        schema:
          type: "string"
          description: "Semicolon-separated waypoints, each formatted as 'x,y,yaw' (meters, meters, radians)."
          pattern: '^-?\\d+(\\.\\d+)?,-?\\d+(\\.\\d+)?,-?\\d+(\\.\\d+)?(\\s*;\\s*-?\\d+(\\.\\d+)?,-?\\d+(\\.\\d+)?,-?\\d+(\\.\\d+)?)*$'
          examples:
            - "0.0,0.0,0.0; 5.0,1.0,0.0"
      photo_interval_m:
        type: "double"
        required: false
        default: 5.0
      camera_topic:
        type: "string"
        required: false
        default: "/camera/image_raw"

  - id: "explore_area.xml"
    description: "Autonomous exploration of an unknown area with obstacle avoidance"
    context_requirements:
      - ROBOT_POSE
      - POINTCLOUD
      - BATTERY_STATE
    blackboard_contract:
      exploration_radius_m:
        type: "double"
        required: false
        default: 50.0
      min_battery_percent:
        type: "double"
        required: false
        default: 20.0
      return_home_on_low_battery:
        type: "bool"
        required: false
        default: true
