# Implementation Plan

1. **bt_executor**
  - ~~1.1 Task: Create `bt_executor` ROS 2 package skeleton with `ament_cmake`.~~
    - ~~Inputs: Package name `bt_executor`, node name requirements from architecture.~~
    - ~~Outputs: `src/bt_executor/` directory containing default `CMakeLists.txt` and `package.xml`.~~
    - ~~Tests: `colcon list | grep bt_executor`.~~
  - ~~1.2 Task: Declare dependencies (`rclcpp`, `behaviortree_cpp`, `yaml-cpp`, `nlohmann_json`, `std_srvs`) in `src/bt_executor/package.xml`.~~
    - ~~Inputs: Dependency list from architecture.~~
    - ~~Outputs: Updated `package.xml` with `<depend>` entries.~~
    - ~~Tests: `colcon build --packages-select bt_executor --event-handlers console_direct+`.~~
  - ~~1.3 Task: Configure `src/bt_executor/CMakeLists.txt` to build `bt_executor` library and node executable.~~
    - ~~Inputs: Source file list and dependency libraries.~~
    - ~~Outputs: Populated CMake target definitions linking required libraries.~~
    - ~~Tests: `colcon build --packages-select bt_executor`.~~
  - ~~1.4 Task: Define core executor interface in `include/bt_executor/bt_executor.hpp`.~~
    - ~~Inputs: Responsibilities listed in architecture.~~
    - ~~Outputs: Header declaring `BTExecutor` class with lifecycle, tick loop, service clients.~~
    - ~~Tests: `grep -R "class BTExecutor" src/bt_executor/include`.~~
  - ~~1.5 Task: Implement node entry point in `src/bt_executor_node.cpp` (initialize rclcpp, instantiate executor, spin).~~
    - ~~Inputs: `BTExecutor` class interface.~~
    - ~~Outputs: Compilable `bt_executor_node.cpp`.~~
    - ~~Tests: `colcon build --packages-select bt_executor`.~~
   - 1.6 Task: Declare BehaviorTree loading API in `include/bt_executor/bt_loader.hpp`.
     - Inputs: Need to load XML trees and register plugins.
     - Outputs: Header with functions for loading/parsing BT XML.
     - Tests: `grep -R "class BTLoader" src/bt_executor/include`.
   - 1.7 Task: Implement tree loading logic in `src/bt_loader.cpp` using `BehaviorTreeFactory`.
     - Inputs: Loader interface, config paths from YAML.
     - Outputs: Functionality that returns `BT::Tree` objects with registered actions.
     - Tests: `colcon test --packages-select bt_executor --ctest-args -R bt_loader`.
   - 1.8 Task: Declare failure handler interface in `include/bt_executor/bt_failure_handler.hpp`.
     - Inputs: Failure handling requirements (reason capture, retries).
     - Outputs: Header exposing methods to summarize failure state.
     - Tests: `grep -R "class BTFailureHandler" src/bt_executor/include`.
   - 1.9 Task: Implement failure handling logic in `src/bt_failure_handler.cpp` (collect context, trigger LLM loop).
     - Inputs: Handler header, context service contract.
     - Outputs: Functions that build failure reports and drive LLM query request.
     - Tests: `colcon test --packages-select bt_executor --ctest-args -R bt_failure_handler`.
   - 1.10 Task: Declare monitoring interface in `include/bt_executor/bt_monitor.hpp`.
     - Inputs: Need to publish status and metrics.
     - Outputs: Header for monitoring publisher utilities.
     - Tests: `grep -R "class BTMonitor" src/bt_executor/include`.
   - 1.11 Task: Implement monitoring publishers in `src/bt_monitor.cpp` (status topics, diagnostics).
     - Inputs: Monitor header, ROS topic names.
     - Outputs: Node methods that emit BT status messages.
     - Tests: `colcon test --packages-select bt_executor --ctest-args -R bt_monitor`.
   - 1.12 Task: Add runtime configuration at `config/bt_config.yaml` (tree path, retry limits, context services).
     - Inputs: Parameters enumerated in architecture.
     - Outputs: YAML file under `src/bt_executor/config/`.
     - Tests: `python3 - <<'PY'\nimport yaml\nyaml.safe_load(open('src/bt_executor/config/bt_config.yaml'))\nPY`.
   - 1.13 Task: Author base Behavior Tree XML in `src/bt_executor/trees/base_tree.xml`.
     - Inputs: Initial behaviors required (existing actions and LLM nodes).
     - Outputs: Valid BT XML file referencing registered plugins.
     - Tests: `xmllint --noout src/bt_executor/trees/base_tree.xml`.
   - 1.14 Task: Provide launch file `launch/bt_executor.launch.py` to start executor with parameters.
     - Inputs: Node name, config file path.
     - Outputs: ROS 2 launch script under `src/bt_executor/launch/`.
     - Tests: `ros2 launch bt_executor bt_executor.launch.py --show-args`.
   - 1.15 Task: Implement gtests validating loader, monitor, and failure handler components.
     - Inputs: Test cases covering configuration parsing and failure workflows.
     - Outputs: Test sources under `src/bt_executor/test/`.
     - Tests: `colcon test --packages-select bt_executor`.
   - 1.16 Task: Add system test that launches executor against mock services and checks `ros2 node list` for `bt_executor_node`.
     - Inputs: Launch test description.
     - Outputs: Integration test under `src/bt_executor/test/launch/`.
     - Tests: `ros2 test src/bt_executor/test/launch/test_bt_executor_launch.py`.

2. **bt_actions**
   - 2.1 Task: Create `bt_actions` ROS 2 package skeleton with `ament_cmake`.
     - Inputs: Package name `bt_actions`.
     - Outputs: `src/bt_actions/` with default build files.
     - Tests: `colcon list | grep bt_actions`.
   - 2.2 Task: Declare dependencies (`rclcpp`, `behaviortree_cpp`, `nav2_msgs`, `sensor_msgs`, `geometry_msgs`, `action_msgs`) in `package.xml`.
     - Inputs: Dependency list from architecture.
     - Outputs: Updated `package.xml` with `<depend>` entries.
     - Tests: `colcon build --packages-select bt_actions`.
   - 2.3 Task: Configure `CMakeLists.txt` to compile shared library exporting BT plugins.
     - Inputs: Source files list.
     - Outputs: Library target with `PLUGINLIB_EXPORT_CLASS` registration.
     - Tests: `colcon build --packages-select bt_actions`.
   - 2.4 Task: Create header and stub implementation for `navigate_action` plugin.
     - Inputs: Navigation action requirements (goal pose).
     - Outputs: `include/bt_actions/navigate_action.hpp`, `src/navigate_action.cpp`.
     - Tests: `colcon build --packages-select bt_actions`.
   - 2.5 Task: Implement `navigate_action` execute/tick logic using `nav2_msgs::NavigateToPose`.
     - Inputs: ROS action client API.
     - Outputs: Completed `navigate_action.cpp`.
     - Tests: `colcon test --packages-select bt_actions --ctest-args -R navigate_action`.
   - 2.6 Task: Create header and stub for `take_photo_action`.
     - Inputs: Camera capture requirement.
     - Outputs: `include/bt_actions/take_photo_action.hpp`, `src/take_photo_action.cpp`.
     - Tests: `colcon build --packages-select bt_actions`.
   - 2.7 Task: Implement `take_photo_action` logic (trigger capture, store file reference).
     - Inputs: Camera service/topic contract.
     - Outputs: Completed implementation storing result on blackboard.
     - Tests: `colcon test --packages-select bt_actions --ctest-args -R take_photo_action`.
   - 2.8 Task: Create header and stub for `detect_tree_condition`.
     - Inputs: Condition requirements (sensor data).
     - Outputs: `include/bt_actions/detect_tree_condition.hpp`, `src/detect_tree_condition.cpp`.
     - Tests: `colcon build --packages-select bt_actions`.
   - 2.9 Task: Implement `detect_tree_condition` to query detection topic and return `SUCCESS`/`FAILURE`.
     - Inputs: Detection topic interface.
     - Outputs: Condition node logic.
     - Tests: `colcon test --packages-select bt_actions --ctest-args -R detect_tree_condition`.
   - 2.10 Task: Create header and stub for `explore_field_action`.
     - Inputs: Exploration behavior specification.
     - Outputs: `include/bt_actions/explore_field_action.hpp`, `src/explore_field_action.cpp`.
     - Tests: `colcon build --packages-select bt_actions`.
   - 2.11 Task: Implement `explore_field_action` to trigger coverage path or frontier exploration.
     - Inputs: Navigation primitives, parameters.
     - Outputs: Completed action implementation.
     - Tests: `colcon test --packages-select bt_actions --ctest-args -R explore_field_action`.
   - 2.12 Task: Populate `plugin.xml` registering all BT action/condition classes.
     - Inputs: Class names, library path.
     - Outputs: `src/bt_actions/plugin.xml`.
     - Tests: `xmllint --noout src/bt_actions/plugin.xml`.
   - 2.13 Task: Add unit tests using BT factory to load each plugin and tick with mocked ROS handles.
     - Inputs: Mock nodes or dependency injection.
     - Outputs: Tests under `src/bt_actions/test/`.
     - Tests: `colcon test --packages-select bt_actions`.
   - 2.14 Task: Provide manual verification instructions by launching dummy BT and checking `ros2 action list` for any temporary servers.
     - Inputs: Launch description referencing test nodes.
     - Outputs: `src/bt_actions/test/launch/test_bt_actions_launch.py`.
     - Tests: `ros2 launch src/bt_actions/test/launch/test_bt_actions_launch.py` then `ros2 action list`.

3. **bt_nodes_llm**
   - 3.1 Task: Create `bt_nodes_llm` ROS 2 package skeleton with `ament_cmake`.
     - Inputs: Package name `bt_nodes_llm`.
     - Outputs: `src/bt_nodes_llm/`.
     - Tests: `colcon list | grep bt_nodes_llm`.
   - 3.2 Task: Add dependencies (`rclcpp`, `behaviortree_cpp`, `nlohmann_json`, `openai_sdk`) to `package.xml`.
     - Inputs: Required libraries.
     - Outputs: Updated dependency entries.
     - Tests: `colcon build --packages-select bt_nodes_llm`.
   - 3.3 Task: Configure `CMakeLists.txt` for plugin library build and include directories.
     - Inputs: Source files.
     - Outputs: Library target with exported plugin symbols.
     - Tests: `colcon build --packages-select bt_nodes_llm`.
   - 3.4 Task: Declare `ThinkingNode` interface in `include/bt_nodes_llm/thinking_node.hpp`.
     - Inputs: Architecture description (LLM reasoning).
     - Outputs: Header file with public API.
     - Tests: `grep -R "class ThinkingNode" src/bt_nodes_llm/include`.
   - 3.5 Task: Implement `thinking_node.cpp` to assemble prompt, call LLM service, and write response to blackboard.
     - Inputs: `ThinkingNode` header, `llm_interface` service contract.
     - Outputs: Completed node implementation.
     - Tests: `colcon test --packages-select bt_nodes_llm --ctest-args -R thinking_node`.
   - 3.6 Task: Declare `BlackboardUpdateNode` interface in `include/bt_nodes_llm/blackboard_update_node.hpp`.
     - Inputs: Need to write structured context to BT blackboard.
     - Outputs: Header file.
     - Tests: `grep -R "class BlackboardUpdateNode" src/bt_nodes_llm/include`.
   - 3.7 Task: Implement `blackboard_update_node.cpp` to extract ROS context and update BT blackboard entries.
     - Inputs: Header definitions and context topic interfaces.
     - Outputs: Implementation file.
     - Tests: `colcon test --packages-select bt_nodes_llm --ctest-args -R blackboard_update_node`.
   - 3.8 Task: Populate `plugin.xml` registering LLM-related nodes.
     - Inputs: Class names prepared above.
     - Outputs: `src/bt_nodes_llm/plugin.xml`.
     - Tests: `xmllint --noout src/bt_nodes_llm/plugin.xml`.
   - 3.9 Task: Add unit tests for LLM nodes with mocked service responses.
     - Inputs: GTest or `ament_catch2` harness.
     - Outputs: Test sources verifying JSON parsing and blackboard writes.
     - Tests: `colcon test --packages-select bt_nodes_llm`.
   - 3.10 Task: Provide launch test to load BT containing LLM nodes and verify `ros2 service list` includes `llm_interface/LLMQuery`.
     - Inputs: Launch description referencing executor and mock service.
     - Outputs: Launch test under `src/bt_nodes_llm/test/launch/`.
     - Tests: `ros2 launch src/bt_nodes_llm/test/launch/test_llm_bt_nodes.launch.py` then `ros2 service list`.

4. **context_gatherer**
   - 4.1 Task: Create `context_gatherer` ROS 2 package skeleton with `ament_cmake`.
     - Inputs: Package name `context_gatherer`.
     - Outputs: `src/context_gatherer/`.
     - Tests: `colcon list | grep context_gatherer`.
   - 4.2 Task: Declare dependencies (`rclcpp`, `sensor_msgs`, `nav_msgs`, `geographic_msgs`, `cv_bridge`, `image_transport`) in `package.xml`.
     - Inputs: Sensor data requirements.
     - Outputs: Updated dependency tags.
     - Tests: `colcon build --packages-select context_gatherer`.
   - 4.3 Task: Configure `CMakeLists.txt` to build node executable and link OpenCV if needed.
     - Inputs: Node source files, OpenCV include paths.
     - Outputs: Updated build script.
     - Tests: `colcon build --packages-select context_gatherer`.
   - 4.4 Task: Define node interface in `include/context_gatherer/context_gatherer.hpp`.
     - Inputs: Architecture design (collect camera, GPS, map).
     - Outputs: Header describing publishers, subscriptions, service servers.
     - Tests: `grep -R "class ContextGathererNode" src/context_gatherer/include`.
   - 4.5 Task: Implement `context_gatherer_node.cpp` to aggregate data into a JSON message/service response.
     - Inputs: Header definitions, ROS APIs.
     - Outputs: Working node in `src/context_gatherer/src/`.
     - Tests: `colcon build --packages-select context_gatherer`.
   - 4.6 Task: Add launch file `launch/context_gatherer.launch.py` to start node with remappings.
     - Inputs: Topic names, frame IDs.
     - Outputs: Launch script.
     - Tests: `ros2 launch context_gatherer context_gatherer.launch.py --show-args`.
   - 4.7 Task: Implement test node publishing synthetic sensor data for automated verification.
     - Inputs: Mock sensor messages.
     - Outputs: Test publisher under `src/context_gatherer/test/`.
     - Tests: `colcon test --packages-select context_gatherer --ctest-args -R mock_sensor`.
   - 4.8 Task: Add integration test that launches context gatherer and verifies aggregated context via `ros2 service call /context_gatherer/get_context std_srvs/srv/Trigger`.
     - Inputs: Launch test file.
     - Outputs: Launch test script under `test/launch`.
     - Tests: `ros2 launch src/context_gatherer/test/launch/test_context_gatherer.launch.py` then `ros2 service call ...`.
   - 4.9 Task: Document manual check to run `ros2 topic list` and confirm expected camera/map topics while node runs.
     - Inputs: Running node.
     - Outputs: Verification instructions in tests/README if desired.
     - Tests: `ros2 topic list`.

5. **llm_interface**
   - 5.1 Task: Create `llm_interface` ROS 2 Python package with `ament_python`.
     - Inputs: Package name `llm_interface`.
     - Outputs: `src/llm_interface/` containing setup files.
     - Tests: `colcon list | grep llm_interface`.
   - 5.2 Task: Define custom service `srv/LLMQuery.srv` (request prompt/context, response XML string).
     - Inputs: Service contract from architecture.
     - Outputs: `src/llm_interface/srv/LLMQuery.srv`.
     - Tests: `ros2 interface show llm_interface/srv/LLMQuery`.
   - 5.3 Task: Populate `package.xml` with dependencies (`rclpy`, `openai`, `nlohmann_json`, `requests`).
     - Inputs: Dependency list.
     - Outputs: Updated package metadata.
     - Tests: `colcon build --packages-select llm_interface`.
   - 5.4 Task: Implement `prompt_templates.py` to manage reusable prompt snippets.
     - Inputs: Prompt requirements.
     - Outputs: Python module returning formatted strings.
     - Tests: `pytest src/llm_interface/test/test_prompt_templates.py`.
   - 5.5 Task: Implement `bt_xml_generator.py` to turn LLM JSON into BT XML.
     - Inputs: XML schema, LLM output format.
     - Outputs: Python module with conversion functions.
     - Tests: `pytest src/llm_interface/test/test_bt_xml_generator.py`.
   - 5.6 Task: Implement `llm_service_node.py` responding to `LLMQuery` requests and calling OpenAI client (mocked in tests).
     - Inputs: Service definition, prompt modules.
     - Outputs: ROS 2 node entry point script.
     - Tests: `pytest src/llm_interface/test/test_llm_service_node.py`.
   - 5.7 Task: Add configuration file `config/prompt_config.yaml` storing API parameters and prompt handles.
     - Inputs: Parameter values.
     - Outputs: YAML config file.
     - Tests: `python3 - <<'PY'\nimport yaml\nyaml.safe_load(open('src/llm_interface/config/prompt_config.yaml'))\nPY`.
   - 5.8 Task: Provide launch description to start service with parameter file.
     - Inputs: Node script, config path.
     - Outputs: `launch/llm_interface.launch.py`.
     - Tests: `ros2 launch llm_interface llm_interface.launch.py --show-args`.
   - 5.9 Task: Add integration test spinning up service with mocked OpenAI backend and verifying `ros2 service call /llm_query llm_interface/srv/LLMQuery`.
     - Inputs: Test harness and monkeypatch.
     - Outputs: Launch or pytest test file.
     - Tests: `pytest src/llm_interface/test/test_llm_query_service.py`.

6. **bt_updater**
   - 6.1 Task: Create `bt_updater` ROS 2 package skeleton with `ament_cmake`.
     - Inputs: Package name `bt_updater`.
     - Outputs: `src/bt_updater/`.
     - Tests: `colcon list | grep bt_updater`.
   - 6.2 Task: Declare dependencies (`rclcpp`, `behaviortree_cpp`, `tinyxml2`, `yaml-cpp`) in `package.xml`.
     - Inputs: Architecture dependency list.
     - Outputs: Updated dependency declarations.
     - Tests: `colcon build --packages-select bt_updater`.
   - 6.3 Task: Define service `srv/UpdateTree.srv` (new subtree XML in, success flag out).
     - Inputs: Service requirements.
     - Outputs: `src/bt_updater/srv/UpdateTree.srv`.
     - Tests: `ros2 interface show bt_updater/srv/UpdateTree`.
   - 6.4 Task: Configure `CMakeLists.txt` to build `bt_updater_node` executable and helper library.
     - Inputs: Source files and include dirs.
     - Outputs: Updated build script.
     - Tests: `colcon build --packages-select bt_updater`.
   - 6.5 Task: Declare XML merger API in `include/bt_updater/xml_merger.hpp`.
     - Inputs: Need to merge subtree with base tree using `tinyxml2`.
     - Outputs: Header file.
     - Tests: `grep -R "class XMLMerger" src/bt_updater/include`.
   - 6.6 Task: Implement XML merge logic in `src/xml_merger.cpp` handling insertion points and validation.
     - Inputs: Header definitions, tree schema.
     - Outputs: Implementation file.
     - Tests: `colcon test --packages-select bt_updater --ctest-args -R xml_merger`.
   - 6.7 Task: Implement `bt_updater_node.cpp` providing `UpdateTree` service and writing merged XML back to file.
     - Inputs: Service interface, merger component.
     - Outputs: Node implementation.
     - Tests: `colcon build --packages-select bt_updater`.
   - 6.8 Task: Add unit tests for XML merge edge cases.
     - Inputs: Sample base/subtree pairs.
     - Outputs: Test files in `src/bt_updater/test/`.
     - Tests: `colcon test --packages-select bt_updater`.
   - 6.9 Task: Provide launch test verifying service availability via `ros2 service call /update_tree bt_updater/srv/UpdateTree`.
     - Inputs: Launch description.
     - Outputs: Launch test file.
     - Tests: `ros2 launch src/bt_updater/test/launch/test_bt_updater.launch.py` then `ros2 service call ...`.

7. **chat_interface**
   - 7.1 Task: Create `chat_interface` ROS 2 Python package with `ament_python`.
     - Inputs: Package name `chat_interface`.
     - Outputs: `src/chat_interface/`.
     - Tests: `colcon list | grep chat_interface`.
   - 7.2 Task: Define `srv/UserCommand.srv` capturing user instruction and metadata.
     - Inputs: Service schema requirements.
     - Outputs: `src/chat_interface/srv/UserCommand.srv`.
     - Tests: `ros2 interface show chat_interface/srv/UserCommand`.
   - 7.3 Task: Configure package metadata with dependencies (`rclpy`, `FastAPI`, `websockets`, `std_msgs`).
     - Inputs: Architecture dependency list.
     - Outputs: Updated `package.xml` and `setup.cfg`.
     - Tests: `colcon build --packages-select chat_interface`.
   - 7.4 Task: Implement CLI client in `src/chat_interface/cli_interface.py` sending `UserCommand` requests and displaying responses.
     - Inputs: Service definition.
     - Outputs: Python CLI script.
     - Tests: `pytest src/chat_interface/test/test_cli_interface.py`.
   - 7.5 Task: Implement web interface using FastAPI + WebSockets in `src/chat_interface/web_interface.py`.
     - Inputs: UI/UX requirements, ROS bridge.
     - Outputs: ASGI app with endpoints and websocket handlers.
     - Tests: `pytest src/chat_interface/test/test_web_interface.py`.
   - 7.6 Task: Create HTML template `templates/index.html` with minimal UI for command submission and log display.
     - Inputs: Frontend needs.
     - Outputs: Template file.
     - Tests: `python3 - <<'PY'\nfrom bs4 import BeautifulSoup\nBeautifulSoup(open('src/chat_interface/templates/index.html'), 'html.parser')\nPY`.
   - 7.7 Task: Provide launch file `launch/chat_interface.launch.py` to spin CLI or web server nodes.
     - Inputs: Node entry points.
     - Outputs: Launch script.
     - Tests: `ros2 launch chat_interface chat_interface.launch.py --show-args`.
   - 7.8 Task: Add end-to-end test using `pytest` to start FastAPI test client and verify `UserCommand` service calls succeed via mocked executor.
     - Inputs: HTTP client fixtures, service mocks.
     - Outputs: Test file.
     - Tests: `pytest src/chat_interface/test/test_end_to_end.py`.

8. **bt_visualizer (optional)**
   - 8.1 Task: Create optional `bt_visualizer` ROS 2 Python package with `ament_python`.
     - Inputs: Package name `bt_visualizer`.
     - Outputs: `src/bt_visualizer/`.
     - Tests: `colcon list | grep bt_visualizer`.
   - 8.2 Task: Configure dependencies (`rclpy`, `behaviortree_cpp`, `rosbridge_server`) in package metadata.
     - Inputs: Architecture references.
     - Outputs: Updated `package.xml` and setup files.
     - Tests: `colcon build --packages-select bt_visualizer`.
   - 8.3 Task: Implement `visualizer_node.py` to subscribe to BT status and forward via rosbridge/websocket.
     - Inputs: Monitoring topics from `bt_executor`.
     - Outputs: Node script.
     - Tests: `pytest src/bt_visualizer/test/test_visualizer_node.py`.
   - 8.4 Task: Scaffold web assets under `webapp/` to render BT graph and status.
     - Inputs: UI requirements.
     - Outputs: HTML/CSS/JS files.
     - Tests: `npm test` (if using JS tooling) or `python3 -m http.server` smoke test instructions.
   - 8.5 Task: Provide launch file to start visualizer alongside rosbridge.
     - Inputs: Node script, rosbridge configuration.
     - Outputs: `launch/bt_visualizer.launch.py`.
     - Tests: `ros2 launch bt_visualizer bt_visualizer.launch.py --show-args`.
   - 8.6 Task: Document manual verification using `ros2 topic list` to confirm visualizer topics while running.
     - Inputs: Running launch system.
     - Outputs: Verification instructions.
     - Tests: `ros2 topic list`.

9. **Integration & Validation**
   - 9.1 Task: Create top-level `src/llm_bt_system.launch.py` composing all critical nodes (executor, context gatherer, LLM interface, updater).
     - Inputs: Individual launch files.
     - Outputs: Aggregate launch script.
     - Tests: `ros2 launch llm_bt_system.launch.py --show-args`.
   - 9.2 Task: Add `colcon.pkg` or workspace metadata to ensure packages build together.
     - Inputs: Package list.
     - Outputs: Updated workspace configuration.
     - Tests: `colcon build`.
   - 9.3 Task: Implement system test launching aggregate stack with mocks and asserting `ros2 node list` includes all components.
     - Inputs: Launch test file.
     - Outputs: `test/system/test_full_stack.launch.py`.
     - Tests: `ros2 launch test/system/test_full_stack.launch.py` then `ros2 node list`.
   - 9.4 Task: Add scripted verification to simulate BT failure loop and confirm new subtree insertion (mock LLM response).
     - Inputs: Test scenario description.
     - Outputs: Integration test script.
     - Tests: `pytest test/system/test_failure_recovery.py`.
   - 9.5 Task: Provide manual validation checklist covering `ros2 topic list`, `ros2 service list`, and `ros2 param get` while system runs.
     - Inputs: Running stack.
     - Outputs: Checklist document (e.g., `docs/validation.md`).
     - Tests: Execute listed `ros2` commands.
   - 9.6 Task: Set up CI workflow (GitHub Actions or similar) running `colcon build`, `colcon test`, and `pytest` suites.
     - Inputs: Repository URL, build commands.
     - Outputs: `.github/workflows/ci.yaml`.
     - Tests: `act workflow run` locally or observe CI pass.
   - 9.7 Task: Update documentation (`README.md`, `architecture.md` appendices) describing build, run, and testing procedures.
     - Inputs: Implementation details.
     - Outputs: Revised docs.
     - Tests: `markdownlint README.md architecture.md`.
